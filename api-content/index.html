{"posts":[{"title":"基于边缘计算的实时火焰检测系统的设计","content":"#PC端工作 安装好显卡驱动,cuda11.7版本以及cudnn 软件Anaconda,命令行调试工具，开发IDE pycharm 这里推荐Termius,界面简洁美观，可自定义执行脚本，节省大量复制粘贴时间 官网下载地址Termius 以上所有软件均已打包至网盘 百度网盘：https://pan.baidu.com/s/1ezDhLMeyTdZwp_4I85c4QA 提取码：w06i 谷歌网盘：https://drive.google.com/drive/folders/1HxvTaL_20HdHceTlb0nVGCSwr5YZC-hI?usp=share_link 介绍一下本机配置及系统环境 12th Gen Intel(R) Core(TM) i5 / B660i 芯片组 Nvidia RTX3060ti 8G （选择N卡能够使用cuda, 相较于A卡有无可比拟的优势 DDR4 3200 16G*2 win10专业版 22H2 完成前期准备工作后，开始安装pytorch，torchvision。利用Anaconda创建虚拟环境，保证该项目独立运行避免冲突问题，方便后期备份与管理 打开Anaconda选择Create ，命名并选择Python版本，这里选择3.8，等待片刻即可完成环境创建 打开终端调试工具Termius 输入 conda activate 环境名 激活虚拟环境 激活完成后开始配置torchvision与pytorch 进入pytorch官网 可以看到有三种不同的安装方式，分别为conda，pip 与 本地安装 网络环境较好的可以选择conda与pip，对于这二者的区别可以查看此文 conda pip 区别 ,浅显易懂 总的来说pip可以允许你在任何环境中安装python包，而conda允许你在conda环境中安装任何语言包 这里选择conda安装 ，需要注意的是，一定要安装与自己cuda对应的版本（11.7），在终端输入 有GPU, cuda版本为11.7 conda install pytorch torchvision torchaudio pytorch-cuda=11.7 -c pytorch -c nvidia 若只有CPU则输入 conda install pytorch torchvision torchaudio cpuonly -c pytorch 整个过程耗时大约5分钟 完成后在命令行输入 python import torch torch.cuda.is_available() 若输出 True则表示安装成功 随后至yolov5的github首页下载源码 或可直接在命令行输入 git clone -b v6.0 https://github.com/ultralytics/yolov5/releases/tag/v6.0 下载源码解压后按照所需依赖 pip install -r requirements.txt 若下载较慢可以使用国内源，这里提供俩个，可直接添加至Termius脚本库，方便调用 清华源 -i https://mirrors.aliyun.com/pypi/simple/ 执行方式 ：pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/ 阿里 -i https://pypi.tuna.tsinghua.edu.cn/simple gensim 全部完成后执行检测，会自动下载权重，成功如图 pyhton detect.py 转到嵌入式端 首先需要下载镜像，到官网选择合适的版本即可，这里选择jetson nano jetpack4.6 下载好后选择一张64G的tf卡进行格式化，使用etcher进行烧录，启动即可 首先配置cuda，系统已自带10.2 输入 sudo vi ~/.bashrc 在底部添加 export PATH=/usr/local/cuda-10.2/bin${PATH:+:${PATH}} export LD_LIBRARY_PATH=/usr/local/cuda-10.2/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}} export CUDA_ROOT=/usr/local/cuda export OPENBLAS_CORETYPE=ARMV8 退出后分别输入 source ~/.bashrc nvcc -V 若出现如下画面则说明配置成功 安装相关依赖 sudo apt-get install libatlas-base-dev gfortran libcanberra-gtk-module libcanberra-gtk3-module -y sudo apt-get install libhdf5-serial-dev hdf5-tools -y sudo apt-get install nano locate screen -y sudo apt-get install build-essential -y sudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev -y sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff5-dev libdc1394-22-dev -y sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev liblapacke-dev -y sudo apt-get install libxvidcore-dev libx264-dev -y sudo apt-get install libatlas-base-dev gfortran -y sudo apt-get install ffmpeg -y sudo apt-get install libopenmpi2 sudo apt-get install libopenblas-dev sudo apt-get install libjpeg-dev zlib1g-dev sudo apt-get install libcanberra-gtk-module sudo apt-get install libopenblas-base libopenmpi-dev 更新Cmake wget http://www.cmake.org/files/v3.13/cmake-3.13.0.tar.gz tar xpvf cmake-3.13.0.tar.gz cmake-3.13.0/ cd cmake-3.13.0/ ./bootstrap --system-curl make -j4 echo 'export PATH=~/cmake-3.13.0/bin/:$PATH' &gt;&gt; ~/.bashrc source ~/.bashrc 编译时间较长，耐心等待 如图显示，更新完成 jtop安装 sudo apt-get install libhdf5-serial-dev hdf5-tools sudo apt-get install libatlas-base-dev gfortran pip3 install jetson-stats reboot 输入 jtop 即可监控系统状态 安装torch和torchvision 这里选择torch1.8.0和torchvision0.90 百度网盘 :链接:https://pan.baidu.com/s/1gqEubQInnH8ebltJZhDijA 提取码：b5ye 官网其他版本 : https://forums.developer.nvidia.com/t/pytorch-for-jetson/72048 安装前工作 防止出现core dumped的情况 sudo vi ~/.bashrc export OPENBLAS_CORETYPE=ARMV8 下载好后，使用unzip命令解压压缩包并cd进入 torch1.8.0安装 sudo pip3 install [name].whl torchvision0.9.0安装 cd torchvision export BUILD_VERSION=0.9.0 python3 setup.py install --user 安装时间较长 测试安装是否成功 python3 import torch import torchvision print(torch.cuda.is_available()) quit() 输出True则成功 yolov5板端运行 首先从github下载 git clone -b v5.0 https://github.com/ultralytics/yolov5.git 如需使用其他版本 修改 -b v （所需版本）. 0 , 目前官方提供 1.0-7.0可供选择 cd进入并安装依赖 pip install -r requirements 执行 python3 detect.py 结果与PC端相同 TensorRT加速 python3 gen_wts.py -w best.pt -o fire.wts cd ~/tensorrtx/yolov5/ mkdir build cd build 将生成的wts文件复制到build下 #手动下载的，名称为yolov5-master cmake .. make -j4 sudo ./yolov5 -s yolov5s.wts yolov5n.engine s sudo ./yolov5 -d yolov5n.engine ../samples/ 细节及程序优化部分待项目结束后公布，谢谢。 ","link":"https://coldrepublic.top/post/ji-yu-bian-yuan-ji-suan-de-shi-shi-huo-yan-jian-ce-xi-tong-de-she-ji/"}]}